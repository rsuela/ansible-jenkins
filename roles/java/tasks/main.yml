---
- name: Download "{{ jdk_installer }}"
  win_get_url:
    url: 'http://52.63.197.165:8081/artifactory/installers/{{ jdk_installer }}'
    dest: C:\Installers"{{ jdk_installer }}"
    url_username: admin
    url_password: password

- name: Install oracle java
  win_package:
    product_id: '{26A24AE4-039D-4CA4-87B4-2F64180211F0}'
    arguments: /s ADDLOCAL="ToolsFeature,SourceFeature,PublicjreFeature"
    path: C:\Installers\"{{ jdk_installer }}"
    state: present

- name: Set Java_home
  win_environment:
    state: present
    name: JAVA_HOME
    value: 'C:\program files\java\jdk1.{{ java_major_version }}_{{ java_minor_version }}'
    level: machine

- name: Add Java to path
  win_path:
    elements:
      - 'c:\program files\java\jdk{{ java_major_version }}_{{ java_minor_version }}\bin'
